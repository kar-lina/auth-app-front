import{t as D,z as p,u as I,_ as L,a as O}from"./B0qHMu1x.js";import{_ as R}from"./D32lrqyu.js";import{_ as $}from"./gPbABvYE.js";import{_ as j}from"./D9neHLkh.js";import{u as q,r as h,h as z,o as b,c as v,b as i,w,a as t,n as e,q as g,v as y,s as A,x as k,t as C,y as M,d as N}from"./BTuofGIq.js";import{u as G}from"./Cdxx4xVe.js";const H={class:"p-5 md:p-10 text-center rounded-xl bg-white"},J=t("h1",{class:"text-xl md:text-2xl mb-5 md:mb-10"},"Добро пожаловать в AuthApp!",-1),K={class:"input input-bordered flex items-center gap-2 mb-1"},Q={class:"text-xs text-error text-left pl-4"},W={class:"input input-bordered flex items-center gap-2 mb-1"},X={class:"text-xs text-error text-left pl-4"},Y={key:0},Z=t("p",{class:"mb-2"},"Введите код из приложения для аутентификации:",-1),tt=["disabled"],et={class:"mt-5 md:text-base"},ut={__name:"login",setup(st){const S=q(),{authenticateUser:V}=G(),a=h(!1),n=h(""),U=D(p.object({email:p.string().min(1).email(),password:p.string().min(1)})),{errors:_,handleSubmit:F,defineField:x}=I({validationSchema:U}),f=F(async m=>{var c,d;const{data:s,error:l}=await V(a?{...m,twoFactorAuthenticationCode:n.value}:m);a.value=((c=l.value)==null?void 0:c.statusCode)===403,((d=l.value)==null?void 0:d.statusCode)===401&&(n.value=""),!l.value&&s.value&&S.push("/profile")}),[r,P]=x("email"),[u,T]=x("password");return z([r,u],()=>{n.value="",a.value=!1}),(m,s)=>{const l=L,c=O,d=R,B=$,E=j;return b(),v("div",null,[i(E,{name:"auth"},{default:w(()=>[t("div",H,[J,t("form",{class:"flex flex-col gap-4 md:gap-8",onSubmit:s[3]||(s[3]=(...o)=>e(f)&&e(f)(...o))},[t("div",null,[t("label",K,[i(l,{class:"h-4 w-4"}),g(t("input",A({tabindex:"1","onUpdate:modelValue":s[0]||(s[0]=o=>k(r)?r.value=o:null)},e(P),{type:"email",class:"grow",placeholder:"Email",autofocus:"off"}),null,16),[[y,e(r)]])]),t("div",Q,C(e(_).email),1)]),t("div",null,[t("label",W,[i(c),g(t("input",A({tabindex:"2","onUpdate:modelValue":s[1]||(s[1]=o=>k(u)?u.value=o:null)},e(T),{type:"password",class:"grow",placeholder:"Password"}),null,16),[[y,e(u)]])]),t("div",X,C(e(_).password),1)]),e(a)?(b(),v("label",Y,[Z,i(d,{"digit-count":6,small:"","onUpdate:otp":s[2]||(s[2]=o=>n.value=o)})])):M("",!0),t("input",{disabled:!e(n)&&e(a),type:"submit",value:"Войти",class:"btn"},null,8,tt)],32),t("p",et,[N(" Нет аккаунта? "),i(B,{to:"/sign-up",class:"link link-primary"},{default:w(()=>[N(" Зарегистрироваться ")]),_:1})])])]),_:1})])}}};export{ut as default};
